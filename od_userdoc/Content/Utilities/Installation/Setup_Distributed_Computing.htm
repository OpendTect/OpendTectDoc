<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
    </head>
    <body>
        <h3>9.4.6 Setup Distributed Computing<MadCap:keyword term="Setup Distributed Computing" /></h3>
        <p style="text-indent: 0.5in;">
            <img src="../../Resources/Images/Utilities/utilities_inst_setup_dit_comp.png" style="width: 507px;height: auto;max-height: auto;" class="General_Image" />
        </p>
        <p>In order to utilize OpendTect's capability for Distributed Computing, a <i>BatchHosts</i> file must be created and used. This file  contains the list of remote machines (<i>host machines</i> or <i>nodes</i>) and some relevant details about these machines and the path to the Survey Data Root.  OpendTect will use this file to communicate to the remote hosts and launch processes remotely on them. Follow the example  format (shown below) to add the list of remote machines and their details in the respective fields.</p>
        <p>&#160;</p>
        <p>In order to minimize complications, the Setup Distributed Computing tool (formerly known as Setup Batch Processing tool) can be used to create a tailor-made BatchHosts file (via Utilities &gt; Installation &gt; Setup Distributed Computing...).</p>
        <p>As default OpendTect will try to create a new or edit the existing BatchHosts file in it's <MadCap:variable name="Variables.VersionNumber" />.0/data directory. If this directory is not writable OpendTect will advise you of this:</p>
        <p>
            <img src="../../Resources/Images/Utilities/setup-distributed-computing-6.png" style="width: 1606px;height: auto;" class="General_Image" />
        </p>
        <p>&#160;</p>
        <p>It is also possible to use a custom BatchHosts filepath by setting environment variable DTECT_BATCH_HOSTS_FILEPATH:</p>
        <blockquote>
            <p>
                <img src="../../Resources/Images/Utilities/setup-distributed-computing-3.png" style="width: 782px;height: auto;" class="General_Image" />
            </p>
        </blockquote>
        <blockquote>
            <p>&#160;</p>
        </blockquote>
        <p style="font-weight: normal;"><b>BatchHosts file:</b> This field is not editable in the User Interface.</p>
        <p style="font-weight: normal;"><b>Status:</b> Will be given on testing - unknown, available or unavailable.</p>
        <p style="font-weight: normal;"><b>Host Lookup Mode:</b> Select how the machine is found on the network - Hostname DNS or Static IP.</p>
        <p><b>IP address:</b> IP address of the node machine(s). If the background of this field is in red then there is a problem with the resolving of the hostname into the IP address.</p>
        <p><b>Hostname:</b> Hostname of the node machine(s). If the background of this field is in red then there is a problem with the resolving of the hostname.</p>
        <p><b>Display name:</b> Free-text field. Text entered here appears in the Distributed Computing Processing window.</p>
        <p><b>Platform:</b> Select platform type, the options are: Linux (64 bits), Windows (32 bits), Windows (64 bits) and macOS.</p>
        <p><b>Survey data root:</b> Location of the survey (the path to the survey data root folder from the host machine)</p>
        <p><b>Advanced Settings:</b>
        </p>
        <blockquote>
            <ul>
                <li>
                    <p>Here you may change the first port value (in the case that it is blocked or in use). By default this first TCP port is 37500. We advise to open up to 5 ports, e.g. 37500-37504.</p>
                </li>
                <li>
                    <p>Linux users may decide to change the remote shell command from the default ssh to rsh.</p>
                </li>
                <li>
                    <p>When setting to ssh it is required that the user who is running OpendTect is able to login to the other nodes without a password. This can be done by setting up public key authentication between the nodes. We will not go into detail of how to do this. In short this is done by generating the SSH key on the machine you are using to start the jobs, the public key then needs to be uploaded to the nodes and added to the user's .ssh/authorized_keys file.</p>
                </li>
                <li>
                    <p>The Nice level sets the priority on the host machines, 19 being nicest and 1 being least nice).</p>
                </li>
                <li>
                    <p>Finally, the Default Data Root can be set per platform.</p>
                    <p>
                        <img src="../../Resources/Images/Utilities/setup-distributed-computing-5.png" />
                    </p>
                </li>
            </ul>
        </blockquote>
        <p>&#160;</p>
        <p>Description of icons:</p>
        <div>
            <div>
                <p>
                    <img src="../../Resources/Images/Icons/addnew.png" class="Icons" /> <b>Add</b> new host.</p>
                <p>
                    <img src="../../Resources/Images/Icons/delete_bin.png" class="Icons" /> <b>Remove</b> selected host.</p>
                <p>
                    <img src="../../Resources/Images/Icons/uparrow.png" class="Icons" />
                    <img src="../../Resources/Images/Icons/downarrow.png" class="Icons" /> <b>Move</b> host up or down.</p>
                <p>
                    <img src="../../Resources/Images/Icons/checkgreen.png" class="Icons" /> <b>Test hosts</b>. Will perform tests to ensure that the server and nodes can communicate to the necessary extent to participate. (ie: can the nodes find the data root folder and read/write into it). If any hosts fail to be reached, then information will be given to aid you to correct the error.</p>
                <img src="../../Resources/Images/Utilities/Installation setup batch proc test hosts.png" class="General_Image" style="width: 499px;height: auto;" />
            </div>
        </div>
        <p>For more information on this topic, please refer to <a href="http://www.youtube.com/channel/UCiaLX2p5rCcovOK_NAwpaOQ" target="_blank" MadCap:conditions="Default.ScreenOnly">OpendTect's YouTube Channel</a><MadCap:conditionalText MadCap:conditions="Default.PrintOnly">OpendTect's Youtube Channel</MadCap:conditionalText> where you may find the webinar: <a href="https://www.youtube.com/watch?v=9bEXxZ0RyxU" target="_blank" MadCap:conditions="Default.ScreenOnly">Distributed Computing Processing Setup</a><MadCap:conditionalText MadCap:conditions="Default.PrintOnly">Distributed Computing Processing Setup</MadCap:conditionalText>.</p>
        <p>&#160;</p>
        <p><b>Note:</b> The remote daemon must be running on all nodes that receive a job submitted either from or to a Window client machine. Hence only Unix to Unix connections may skip running the daemon on the processing nodes. Use od_RemoteServiceMgr.exe to launch the daemon (od_remoteservice.exe) which will also add a notification icon to the system tray. Once the service starts, the remote machines are ready to be utilized.</p>
        <p>&#160;</p>
    </body>
</html>