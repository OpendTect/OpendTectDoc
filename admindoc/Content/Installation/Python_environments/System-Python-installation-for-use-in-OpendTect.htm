<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
    </head>
    <body>
        <MadCap:conditionalText MadCap:conditions="Default.ScreenOnly">
            <h1>System Python installation for use in OpendTect</h1>
        </MadCap:conditionalText>
        <MadCap:conditionalText MadCap:conditions="Default.PrintOnly">
            <p>
            </p>
            <h3>System Python installation for use in OpendTect</h3>
        </MadCap:conditionalText>
        <p>It is possible to use a system Python installation  in OpendTect. In this scope such a Python installation is not a miniconda or anaconda installation.<br />Note that this is more complicated than the <a href="Internal-Python-installation-for-use-in-OpendTect.htm">Internal Python installation</a>. If you have your own miniconda3 or anaconda3 environment you might want to consider to do the <a href="Custom-Python-installation-from-YAML-files.htm">Custom Python installation</a>.</p>
        <p>In order for OpendTect to use a system Python installation the following things need to be done:</p>
        <ul>
            <li>
                <p>Several packages need to be installed with pip, the requirements are listed below</p>
            </li>
        </ul>
        <ul>
            <li>
                <p>Non Python libraries CUDA, cuDNN and HDF5 need to be installed</p>
            </li>
        </ul>
        <ul>
            <li>
                <p>Make sure that PATH is set correctly for Python and the non Python libraries </p>
            </li>
        </ul>
        <h2>Supported versions</h2>
        <p style="font-weight: normal;">Currently OpendTect and the Machine Learning plugin support:</p>
        <ul>
            <li>
                <p style="font-weight: normal;">Python 3.8</p>
            </li>
            <li>
                <p>CUDA&#160;Toolkit 11.3</p>
            </li>
            <li>
                <p>cuDNN v8.2.1</p>
            </li>
            <li>
                <p>HDF5 1.12.2</p>
            </li>
        </ul>
        <h2>Windows recommendations
        </h2>
        <ul>
            <li>
                <p style="font-weight: normal;">To check whether Python has been installed open the Command Prompt and run:<br /><span style="font-family: 'Courier New';">where.exe python</span><br />If it has been installed it will give the path to python.exe<br /></p>
            </li>
            <li>
                <p>For finding out which Python version is installed open the Command Prompt and run:<br /><span style="font-family: 'Courier New';">python --version</span><br /></p>
            </li>
        </ul>
        <ul>
            <li>
                <p style="font-weight: normal;">We recommend to install Python with the <a href="https://www.python.org/ftp/python/3.8.10/python-3.8.10-amd64.exe" target="_blank">full 64 bits installer</a> from Python.org <a href="https://www.python.org/downloads/windows/" target="_blank">Downloads page for Windows</a>. The other options to install Python are from the Microsoft Store and via the Windows Subsystem for Linux (WSL). The reason for not recommending the Microsoft Store package is that it has <a href="https://docs.python.org/3/using/windows.html#known-issues" target="_blank">limitations</a> that make it not suited for a professional development environment. <br /><br />To make it easier it is recommended to toggle on <i>Add Python 3.8 to PATH</i> before clicking <i>Install Now</i><br /><img src="../../Resources/Images/Install-Windows-Python-38.png" style="width: 525px;height: 322px;" /><br /><small>Figure: Install Python 3.8 to the system and add to path</small><br /></p>
            </li>
            <li>
                <p>Up to 6.6.8 we advise to make sure that you toggle off <i>App Installer python.exe</i> and <i>App Installer python3.exe</i> in the <i>App execution aliases</i> settings.<br /><br /><img src="../../Resources/Images/windows-settings-app-execution-aliases.png" style="width: 328px;height: 321px;" /><br /><small>Figure: Settings &gt; Manage app execution aliases</small></p>
            </li>
        </ul>
        <h3>Check whether all paths are set
        </h3>
        <p style="font-weight: normal;">The paths to the Python and Python Scripts directory should have been set in environment variable Path, e.g:</p>
        <ul>
            <li>
                <p>C:\Users\your_username\AppData\Local\Programs\Python\Python38</p>
            </li>
            <li>
                <p>C:\Users\your_username\AppData\Local\Programs\Python\Python38\Scripts</p>
            </li>
        </ul>
        <p style="font-weight: normal;">The following paths should be listed in the System Environment Path variable:</p>
        <ul>
            <li>
                <p style="font-weight: normal;">C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v11.3\bin</p>
            </li>
            <li>
                <p>C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v11.3\extras\CUPTI\lib64<br></br><i>Please note that this path the CUDA&#160;Toolkit installer will not set. It is recommended to set this one manually so that Python can use CUPTI.</i></p>
            </li>
        </ul>
        <ul>
            <li>
                <p style="font-weight: normal;">C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v11.3\libnvvp</p>
            </li>
        </ul>
        <ul>
            <li>
                <p style="font-weight: normal;">C:\Program Files\HDF_Group\HDF5\1.12.2\bin<br /></p>
            </li>
        </ul>
        <h2>Installations
        </h2>
        <h3>Installing Python packages with pip
        </h3>
        <p style="font-weight: normal;">In the OpendTect <MadCap:variable name="Variables.VersionNumber" />.0\data\Python are several requirements.txt files that pip can use to install the required Python packages.<br />This has to be done via the Command Prompt, Windows PowerShell or Terminal.</p>
        <p style="font-weight: normal;">First make sure to update pip and install wheel to make your life easier:</p>
        <p style="font-weight: normal;"><span style="font-family: 'Courier New'; font-size: 10pt;">python -m pip install --upgrade pip</span>
            <br /><span style="font-family: 'Courier New';"><span style="font-size: 10pt;">pip install wheel</span></span>
        </p>
        <p style="font-weight: normal;">Then run to install the basic packages:<br style="font-family: 'Courier New';font-size: 10pt;" /><span style="font-family: 'Courier New';"><span style="font-size: 10pt;">pip install -r path_to_OpendTect\<MadCap:variable name="Variables.VersionNumber" />.0\data\Python\basic_requirements.txt</span></span></p>
        <p>To install the Python libraries that are required for OpendTect Pro run:<br /><span style="font-family: 'Courier New';"><span style="font-size: 10pt;">pip install -r path_to_OpendTect\<MadCap:variable name="Variables.VersionNumber" />.0\data\Python\dgbpro_requirements.txt</span></span><br /></p>
        <p>To install the Python libraries that are required for the presentation maker run:<br /><span style="font-family: 'Courier New';"><span style="font-size: 10pt;">pip install -r path_to_OpendTect\<MadCap:variable name="Variables.VersionNumber" />.0\data\Python\presentation_maker_requirements.txt</span></span><br /></p>
        <p>To install the Python libraries that are required the Machine Learning plugin run:<br /><span style="font-family: 'Courier New';"><span style="font-size: 10pt;">pip install -r path_to_OpendTect\<MadCap:variable name="Variables.VersionNumber" />.0\data\Python\machine_learning_requirements.txt</span></span><br /></p>
        <p>To install the Python libraries that are optional for the Machine Learning plugin run:<br /><span style="font-family: 'Courier New';"><span style="font-size: 10pt;">pip install -r path_to_OpendTect\<MadCap:variable name="Variables.VersionNumber" />.0\data\Python\machine_learning_requirements_optional.txt</span></span></p>
        <p>To install Python libraries that provide Spyder, Jupyter notebook and related libraries run:<br /><span style="font-family: 'Courier New';"><span style="font-size: 10pt;">pip install -r path_to_OpendTect\<MadCap:variable name="Variables.VersionNumber" />.0\data\Python\notebooks_requirements.txt</span></span><br /></p>
        <h3>Installing CUDA Toolkit, cuDNN and HDF5
        </h3>
        <p style="font-weight: normal;">CUDA Toolkit can be downloaded from the <a href="https://developer.nvidia.com/cuda-11.3.0-download-archive" target="_blank">CUDA&#160;Toolkit</a> download page. Our advise is to download and install CUDA&#160;Toolkit 11.3. </p>
        <p style="font-weight: normal;">cuDNN can be downloaded from the <a href="https://developer.nvidia.com/rdp/cudnn-archive" target="_blank" title="NVIDIA cuDNN is a GPU-accelerated library of primitives for deep neural networks" alt="cuDNN Archive">cuDNN Archive</a>. Our advise is to download  cuDNN v8.2.1 (June 7th, 2021), for CUDA 11.x. It is best to unzip the downloaded zip-file's cuda folder content into the path C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v11.3</p>
        <p style="font-weight: normal;">HDF5 can be downloaded from the <a href="https://www.hdfgroup.org/downloads/hdf5/" target="_blank">hdfgroup.org downloads page</a>. Our advise is to download and install HDF5 1.12.2.</p>
        <h2>Use the system Python environment in OpendTect
        </h2>
        <p style="font-weight: normal;">To use the system Python environment select <b>System</b> as Python environment in the <i>Set Python settings</i> window. When the system Python has been successfully installed the Test button should give the list of Python packages that are available in the system Python environment.<br /></p>
        <p style="font-weight: normal;">Up to 6.6.8 the Test and other buttons inside the <i>Set Python settings window</i> may give the below error. If that happens we suggest that you first check whether <i>App Installer python.exe</i> and <i>App Installer python3.exe</i> in the <i>App execution aliases</i> settings are toggled on. If so then toggle them off and run the test again.</p>
        <p style="font-weight: normal;">
            <img src="../../Resources/Images/error-cannot-detect-python-version-microsoft-store.png" style="width: 503px;height: 189px;" />
            <br /><small>Figure:&#160;Error cannot detect Python version:&#160;Microsoft Store / disable shortcut</small>
            <br />
        </p>
    </body>
</html>