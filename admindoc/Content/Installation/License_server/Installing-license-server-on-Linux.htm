<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
    </head>
    <body>
        <h1>Installing a license server on Linux</h1>
        <p>The FlexNet vendor package with the binaries that are needed can be downloaded from the <a href="https://dgbes.com/index.php/download/flexnet-vendors-packages" target="_blank">FlexNet Vendor Packages download page</a>.</p>
        <ol>
            <li>Download the <a href="https://download.opendtect.org/flexnet/dGB/v6.4-and-newer/flexnet11.17.2.0_dgb_lux64.zip" target="_blank">Linux 64 (FlexNet v11.17.2.0) zip-file</a> for OpendTect Pro &amp; dGB&#160;Plugins for OpendTect 6.4 and newer.<br /><br /></li>
            <li>Create a directory on the server that is to be used as license server for OpendTect. E.g. <code>mkdir /opt/dgb_licserver</code><br /><br /></li>
            <li>Unzip the zip-file in the directory that has been created in previous step.<br /><br /></li>
            <li>The zip-file has the following files:<br /><b>dgbld</b> :&#160;The dGB vendor daemon<br /><b>lmgrd</b> :&#160;The FlexNet license  manager daemon <br /><b>lmutil</b> :&#160;The FlexNet license management utilities<br /><br /></li>
            <li>The next thing that is needed is the server license file. This license file will be provided by the dGB support via support@dgbes.com.<br />Best is to place the license file in the same directory.<br /><br /></li>
            <li>Now the license file needs to be edited. Hence, open the license file with a text editor like Vim.<br /><br /></li>
            <li>In the top of the license file there is a line with text <i>DAEMON dgbld full_path_to/dgbld</i> . <br />Replace the fullpath_to/dgbld with the path to the dgbld file. <br />In this example we will change it into:&#160;<i>DAEMON dgbld /opt/dgb_licserver/dgbld</i> . <br />Save the license file.</li>
        </ol>
        <h2>Starting a license server</h2>
        <p>The license server can be started by executing commands:<br /><code>cd /opt/dgb_licserver<br />./lmgrd -c licensefile.lic -l debug.log</code></p>
        <p>Please refer to the debug.log file in case of issues.</p>
        <p>To see the license server status you may run:<br /><code>./lmutil lmstat -a</code><br />You will then see the port number the server uses, the path to the license file(s) that are in use, whether the license server is up or down, how many licenses for the features are issued and in use.</p>
        <h2>Error messages</h2>
        <p>You may encounter error messages when starting the license server. Listed here are the most common ones and how to solve them.</p>
        <ul>
            <li>
                <p><code>./lmgrd:&#160;No such file or directory</code>
                    <br />
                    <br />This error occurs when either the file or the executable's loader is not present. To find the executable's loader run the following command:<br /><code>file lmgrd</code><br />It should show something like:<br /><code>lmgrd: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-lsb-x86-64.so.3, for GNU/Linux 2.6.18, stripped</code><br />Now check whether the file <i>/lib64/ld-lsb-x86-64.so.3</i> exists. If not then lsb needs to be installed.<br /><br />How to install lsb?&#160;This differs per distro:</p>
                <ul>
                    <li>
                        <p>Debian/Ubuntu: <code>sudo apt-get install lsb</code></p>
                    </li>
                </ul>
                <ul>
                    <li>
                        <p>RHEL/CentOS: <code>yum install redhat-lsb</code></p>
                    </li>
                </ul>
                <ul>
                    <li>
                        <p>OpenSUSE: <code>zypper install lsb</code><br /></p>
                    </li>
                </ul>
            </li>
            <li>
                <p><code>Cannot open "debug.log" as log file (-1)</code>
                    <br />
                    <br />This error message occurs if the user has not enough permissions to create the log file in the path specified. To solve this error message either become a user that has permissions to create the log file in the specified path or create it in a path where the user has sufficient permissions, e.g. in the user's home directory. Debian/Ubuntu users may want to run <code>sudo ./lmgrd -c licensefile.lic -l debug.log</code><br /></p>
            </li>
            <li>
                <p><code>license manager:&#160;can't initialize:&#160;Cannot read license file.</code>
                    <br />
                    <br />This error occurs if the user who starts the license server has no permissions to read the license file. To solve this change the owner of the license file.<br /></p>
            </li>
            <li>
                <p><code>Can't make directory /usr/tmp/.flexlm, errno: 2(No such file or directory)</code>
                    <br />
                    <br />This error message occurs if there is no /usr/tmp folder on the system. It can be solved by creating a symbolic link /usr/tmp that points to /tmp, for example run as root user:<br /><br /><code>ln -s /tmp /usr/tmp</code><br /></p>
            </li>
            <li>
                <p><code>Error getting status:&#160;Cannot find license file (-1,73:2 &#160;"No such file or directory")</code>
                    <br />
                    <br />This error message occurs when you run run <code>./lmutil lmstat -a</code>, but there is no license manager daemon running. It could be that the license manager daemon failed to start. More information can be found in the debug.log file.<br /><br /></p>
            </li>
        </ul>
        <p>&#160;</p>
    </body>
</html>